--========================================
-- REDSOUL HUB - JUNKIE KEY SYSTEM (ENHANCED)
--========================================

--// SERVICES
local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")

--// CONFIG
local CONFIG = {
    API_KEY = "e272e094-2f1e-45ff-a636-55b95ee83ffa",
    SERVICE = "RedsoulHub",
    MAIN_SCRIPT = "https://raw.githubusercontent.com/gamer8410/test/refs/heads/main/justtest"
}

local PROVIDERS = {
    ["6h"]  = "Checkpoint-1",
    ["12h"] = "12-hour-key",
    ["24h"] = "24-hour-key",
    ["48h"] = "48-hour-key"
}

--// LOAD JUNKIE SDK
local Junkie = loadstring(game:HttpGet(
    "https://junkie-development.de/sdk/JunkieKeySystem.lua"
))()

--// LOAD REDZ UI LIBRARY
local Library = loadstring(game:HttpGet(
    "https://raw.githubusercontent.com/tlredz/Library/refs/heads/main/redz-V5-remake/main.luau"
))()

--// ANIMATED LOADING SCREEN
local function showLoadingScreen()
    local PlayerGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    
    local LoadingScreen = Instance.new("ScreenGui")
    LoadingScreen.Name = "RedsoulLoadingScreen"
    LoadingScreen.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    LoadingScreen.Parent = PlayerGui
    
    local Background = Instance.new("Frame")
    Background.Size = UDim2.fromScale(1, 1)
    Background.BackgroundColor3 = Color3.fromRGB(10, 10, 15)
    Background.BorderSizePixel = 0
    Background.Parent = LoadingScreen
    
    local Logo = Instance.new("TextLabel")
    Logo.Size = UDim2.fromOffset(250, 80)
    Logo.Position = UDim2.fromScale(0.5, 0.45)
    Logo.AnchorPoint = Vector2.new(0.5, 0.5)
    Logo.BackgroundTransparency = 1
    Logo.Text = "Redsoul Hub"
    Logo.Font = Enum.Font.GothamBlack
    Logo.TextSize = 42
    Logo.TextColor3 = Color3.fromRGB(255, 30, 30)
    Logo.TextTransparency = 1
    Logo.Parent = Background
    
    local LoadingText = Instance.new("TextLabel")
    LoadingText.Size = UDim2.fromOffset(300, 30)
    LoadingText.Position = UDim2.fromScale(0.5, 0.55)
    LoadingText.AnchorPoint = Vector2.new(0.5, 0.5)
    LoadingText.BackgroundTransparency = 1
    LoadingText.Text = "Initializing Key System..."
    LoadingText.Font = Enum.Font.Gotham
    LoadingText.TextSize = 16
    LoadingText.TextColor3 = Color3.fromRGB(200, 200, 200)
    LoadingText.TextTransparency = 1
    LoadingText.Parent = Background
    
    -- Loading bar
    local BarBackground = Instance.new("Frame")
    BarBackground.Size = UDim2.fromOffset(300, 4)
    BarBackground.Position = UDim2.fromScale(0.5, 0.6)
    BarBackground.AnchorPoint = Vector2.new(0.5, 0.5)
    BarBackground.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    BarBackground.BorderSizePixel = 0
    BarBackground.BackgroundTransparency = 1
    BarBackground.Parent = Background
    Instance.new("UICorner", BarBackground).CornerRadius = UDim.new(1, 0)
    
    local LoadingBar = Instance.new("Frame")
    LoadingBar.Size = UDim2.fromOffset(0, 4)
    LoadingBar.BackgroundColor3 = Color3.fromRGB(255, 30, 30)
    LoadingBar.BorderSizePixel = 0
    LoadingBar.Parent = BarBackground
    Instance.new("UICorner", LoadingBar).CornerRadius = UDim.new(1, 0)
    
    -- Animate fade in
    TweenService:Create(Logo, TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        TextTransparency = 0
    }):Play()
    
    TweenService:Create(LoadingText, TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out, 0, false, 0.2), {
        TextTransparency = 0
    }):Play()
    
    TweenService:Create(BarBackground, TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out, 0, false, 0.3), {
        BackgroundTransparency = 0
    }):Play()
    
    -- Animate loading bar
    task.wait(0.5)
    TweenService:Create(LoadingBar, TweenInfo.new(1.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Size = UDim2.fromOffset(300, 4)
    }):Play()
    
    -- Fade out
    task.wait(1.8)
    local fadeOut = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.In)
    TweenService:Create(Background, fadeOut, {BackgroundTransparency = 1}):Play()
    TweenService:Create(Logo, fadeOut, {TextTransparency = 1}):Play()
    TweenService:Create(LoadingText, fadeOut, {TextTransparency = 1}):Play()
    TweenService:Create(BarBackground, fadeOut, {BackgroundTransparency = 1}):Play()
    TweenService:Create(LoadingBar, fadeOut, {BackgroundTransparency = 1}):Play()
    
    task.wait(0.6)
    LoadingScreen:Destroy()
end

-- Show loading animation
showLoadingScreen()

--// CREATE WINDOW
local Window = Library:MakeWindow({
    Title = "Redsoul Hub",
    SubTitle = "Key System Verification",
    ScriptFolder = "redsoul-hub-keys"
})

--// CREATE MINIMIZER WITH MOBILE BUTTON
local Minimizer = Window:NewMinimizer({
    KeyCode = Enum.KeyCode.End
})

local MobileButton = Minimizer:CreateMobileMinimizer({
    Image = "rbxassetid://97638315497427",
    BackgroundColor3 = Color3.fromRGB(255, 30, 30)
})

--// CREATE TABS
local KeyTab = Window:MakeTab({
    Title = "Get Key",
    Icon = "Key"
})

local VerifyTab = Window:MakeTab({
    Title = "Verify",
    Icon = "Shield"
})

local InfoTab = Window:MakeTab({
    Title = "Info",
    Icon = "Info"
})

--// NOTIFY FUNCTION WITH SOUND
local function notify(title, content, duration, successSound)
    Window:Notify({
        Title = title or "Redsoul Hub",
        Content = content or "",
        Duration = duration or 3
    })
    
    -- Optional: Play sound effect
    if successSound then
        local sound = Instance.new("Sound")
        sound.SoundId = "rbxassetid://6026984224" -- Success sound
        sound.Volume = 0.5
        sound.Parent = game:GetService("SoundService")
        sound:Play()
        game:GetService("Debris"):AddItem(sound, 2)
    end
end

--// CLIPBOARD SAFE COPY
local function safeCopy(link)
    local ok = false
    if setclipboard then
        pcall(function()
            setclipboard(link)
            ok = true
        end)
    end
    if not ok then
        warn("[KEY LINK]:", link)
        notify("Clipboard Blocked", "Link printed in console (F9). Press F9 to view. Or type /console in chatbox", 5)
    end
    return ok
end

--// ANIMATED BUTTON FUNCTION
local function createAnimatedButton(tab, name, duration, provider)
    local button = tab:AddButton({
        Name = name,
        Debounce = 1,
        Callback = function()
            -- Button click animation (handled by library)
            notify("‚ö° Generating Key", "Please wait while we create your link...", 2)
            
            task.wait(0.5) -- Small delay for effect
            
            local success, link = pcall(function()
                return Junkie.getLink(CONFIG.API_KEY, provider, CONFIG.SERVICE)
            end)

            if success and typeof(link) == "string" and #link > 10 then
                if safeCopy(link) then
                    notify("‚úì Success!", duration .. " key link copied to clipboard!", 4, true)
                end
            else
                notify("‚úó Error", "Failed to generate key link. Please try again.", 4)
            end
        end
    })
    return button
end

--// KEY TAB CONTENT
KeyTab:AddSection("üîë Key Duration")

KeyTab:AddParagraph(
    "üìã How to Get Your Key",
    "1. Click one of the buttons below to generate a key link\n2. The link will be copied to your clipboard automatically\n3. Complete the verification steps on the website\n4. Copy your key and paste it in the Verify tab"
)

-- Add animated buttons
createAnimatedButton(KeyTab, "‚è±Ô∏è Get 6 Hour Key", "6-hour", PROVIDERS["6h"])
createAnimatedButton(KeyTab, "‚è±Ô∏è Get 12 Hour Key", "12-hour", PROVIDERS["12h"])
createAnimatedButton(KeyTab, "‚è±Ô∏è Get 24 Hour Key", "24-hour", PROVIDERS["24h"])
createAnimatedButton(KeyTab, "‚è±Ô∏è Get 48 Hour Key", "48-hour", PROVIDERS["48h"])

KeyTab:AddSection()

KeyTab:AddDiscordInvite({
    Title = "Redsoul Hub | Community",
    Description = "Join our Discord for support, updates, and free keys!",
    Banner = Color3.fromRGB(255, 30, 30),
    Logo = "rbxassetid://10734953451",
    Invite = "https://discord.gg/wyx2tape4c",
    Members = 23,
    Online = 10
})

--// VERIFY TAB CONTENT
VerifyTab:AddSection("üîê Enter Your Key")

VerifyTab:AddParagraph(
    "‚úÖ Verification Steps",
    "1. Get a key from the 'Get Key' tab\n2. Complete the key verification steps\n3. Paste your key below and click Verify Key\n4. Wait for verification to complete"
)

local keyInput = ""

VerifyTab:AddTextBox({
    Name = "Key Input",
    Placeholder = "Paste your key here...",
    ClearOnFocus = false,
    Callback = function(Value)
        keyInput = Value
        if Value ~= "" then
            notify("Key Detected", "Key entered! Click Verify Key when ready.", 2)
        end
    end
})

VerifyTab:AddButton({
    Name = "üîì Verify Key",
    Debounce = 2,
    Callback = function()
        local key = keyInput:gsub("%s+", "")
        
        if key == "" then
            notify("‚ö†Ô∏è Error", "Please enter a key first!", 3)
            return
        end

        notify("üîÑ Verifying", "Checking your key... Please wait.", 2)

        -- Simulate verification delay for animation effect
        task.wait(1)

        local ok = false
        local success = pcall(function()
            ok = Junkie.verifyKey(CONFIG.API_KEY, key, CONFIG.SERVICE)
        end)

        if success and ok then
            notify("‚úì Access Granted!", "Loading Redsoul Hub... Welcome!", 3, true)
            
            -- Success animation sequence
            local NotifyGroup = Window:NewNotifyGroup({
                Title = "üéâ Success!",
                Content = "Key verified successfully!",
                Duration = 2
            })
            
            task.wait(0.5)
            NotifyGroup:Notify({
                Title = "üì¶ Loading Script",
                Content = "Initializing main hub...",
                Duration = 1.5
            })
            
            task.wait(1)
            NotifyGroup:Notify({
                Title = "üöÄ Ready!",
                Content = "Launching Redsoul Hub now...",
                Duration = 1
            })
            
            task.wait(1.5)
            
            -- Destroy UI with fade
            Library:Destroy()
            
            -- Load main script
            loadstring(game:HttpGet(CONFIG.MAIN_SCRIPT))()
        else
            notify("‚úó Invalid Key", "The key you entered is incorrect or expired. Please try again.", 4)
        end
    end
})

VerifyTab:AddSection()

VerifyTab:AddParagraph(
    "‚ùì Need Help?",
    "If you're having trouble:\n‚Ä¢ Make sure you copied the entire key\n‚Ä¢ Check if your key has expired\n‚Ä¢ Try generating a new key\n‚Ä¢ Join our Discord for support"
)

--// INFO TAB CONTENT
InfoTab:AddSection("‚ÑπÔ∏è About Redsoul Hub")

InfoTab:AddParagraph(
    "üéÆ What is Redsoul Hub?",
    "Redsoul Hub is a powerful script hub designed to enhance your gaming experience. We provide regular updates, new features, and reliable performance."
)

InfoTab:AddParagraph(
    "‚ö° Features",
    "‚Ä¢ Regular updates and improvements\n‚Ä¢ User-friendly interface\n‚Ä¢ Active community support\n‚Ä¢ Multiple game compatibility\n‚Ä¢ Secure key system"
)

InfoTab:AddSection("üîë Key Information")

InfoTab:AddParagraph(
    "‚è∞ Key Duration",
    "‚Ä¢ 6 Hours - Quick access for short sessions, 1 checkpoint\n‚Ä¢ 12 Hours - Half-day access, 2 checkpoints\n‚Ä¢ 24 Hours - Full day of gaming, 3 checkpoints\n‚Ä¢ 48 Hours - Extended weekend access, 4 checkpoints"
)

InfoTab:AddParagraph(
    "üõ°Ô∏è Security",
    "Your security is our priority. Our key system ensures:\n‚Ä¢ Protected access to premium features\n‚Ä¢ Prevention of unauthorized usage\n‚Ä¢ Regular key rotation for safety"
)

InfoTab:AddSection("üìû Support")

InfoTab:AddButton({
    Name = "üí¨ Join Discord Server",
    Callback = function()
        if setclipboard then
            setclipboard("https://discord.gg/wyx2tape4c")
            notify("‚úì Copied!", "Discord invite link copied to clipboard!", 3)
        else
            notify("Discord", "Join us at: discord.gg/wyx2tape4c", 5)
        end
    end
})

InfoTab:AddButton({
    Name = "üîÑ Check for Updates",
    Callback = function()
        notify("üì° Checking", "Looking for updates...", 2)
        task.wait(1.5)
        notify("‚úì Up to Date", "You're running the latest version!", 3, true)
    end
})

--// SELECT DEFAULT TAB
Window:SelectTab(KeyTab)

--// WELCOME SEQUENCE WITH ANIMATIONS
task.wait(0.5)
local WelcomeGroup = Window:NewNotifyGroup({
    Title = "üëã Welcome!",
    Content = "Welcome to Redsoul Hub Key System, press 'end' button to toggle the UI.",
    Duration = 3
})

task.wait(2)
WelcomeGroup:Notify({
    Title = "üîë Get Started",
    Content = "Get your key to access the hub",
    Duration = 3
})

task.wait(2)
WelcomeGroup:Notify({
    Title = "üí° Tip",
    Content = "Join our Discord for free keys and support!",
    Duration = 4
})
